{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WLMobileRelayUI = void 0;\nconst RedirectDialog_1 = require(\"./components/RedirectDialog/RedirectDialog\");\nconst util_1 = require(\"./components/util\");\nconst constants_1 = require(\"../../../../core/constants\");\nclass WLMobileRelayUI {\n  constructor() {\n    this.attached = false;\n    this.redirectDialog = new RedirectDialog_1.RedirectDialog();\n  }\n  attach() {\n    if (this.attached) {\n      throw new Error('Coinbase Wallet SDK UI is already attached');\n    }\n    this.redirectDialog.attach();\n    this.attached = true;\n  }\n  redirectToCoinbaseWallet(walletLinkUrl) {\n    const url = new URL(constants_1.CBW_MOBILE_DEEPLINK_URL);\n    url.searchParams.append('redirect_url', (0, util_1.getLocation)().href);\n    if (walletLinkUrl) {\n      url.searchParams.append('wl_url', walletLinkUrl);\n    }\n    const anchorTag = document.createElement('a');\n    anchorTag.target = 'cbw-opener';\n    anchorTag.href = url.href;\n    anchorTag.rel = 'noreferrer noopener';\n    anchorTag.click();\n  }\n  openCoinbaseWalletDeeplink(walletLinkUrl) {\n    this.redirectDialog.present({\n      title: 'Redirecting to Coinbase Wallet...',\n      buttonText: 'Open',\n      onButtonClick: () => {\n        this.redirectToCoinbaseWallet(walletLinkUrl);\n      }\n    });\n    setTimeout(() => {\n      this.redirectToCoinbaseWallet(walletLinkUrl);\n    }, 99);\n  }\n  showConnecting(_options) {\n    // it uses the return callback to clear the dialog\n    return () => {\n      this.redirectDialog.clear();\n    };\n  }\n}\nexports.WLMobileRelayUI = WLMobileRelayUI;","map":{"version":3,"names":["Object","defineProperty","exports","value","WLMobileRelayUI","RedirectDialog_1","require","util_1","constants_1","constructor","attached","redirectDialog","RedirectDialog","attach","Error","redirectToCoinbaseWallet","walletLinkUrl","url","URL","CBW_MOBILE_DEEPLINK_URL","searchParams","append","getLocation","href","anchorTag","document","createElement","target","rel","click","openCoinbaseWalletDeeplink","present","title","buttonText","onButtonClick","setTimeout","showConnecting","_options","clear"],"sources":["/Users/shardingdog/billingdog/node_modules/@coinbase/wallet-sdk/dist/sign/walletlink/relay/ui/WLMobileRelayUI.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WLMobileRelayUI = void 0;\nconst RedirectDialog_1 = require(\"./components/RedirectDialog/RedirectDialog\");\nconst util_1 = require(\"./components/util\");\nconst constants_1 = require(\"../../../../core/constants\");\nclass WLMobileRelayUI {\n    constructor() {\n        this.attached = false;\n        this.redirectDialog = new RedirectDialog_1.RedirectDialog();\n    }\n    attach() {\n        if (this.attached) {\n            throw new Error('Coinbase Wallet SDK UI is already attached');\n        }\n        this.redirectDialog.attach();\n        this.attached = true;\n    }\n    redirectToCoinbaseWallet(walletLinkUrl) {\n        const url = new URL(constants_1.CBW_MOBILE_DEEPLINK_URL);\n        url.searchParams.append('redirect_url', (0, util_1.getLocation)().href);\n        if (walletLinkUrl) {\n            url.searchParams.append('wl_url', walletLinkUrl);\n        }\n        const anchorTag = document.createElement('a');\n        anchorTag.target = 'cbw-opener';\n        anchorTag.href = url.href;\n        anchorTag.rel = 'noreferrer noopener';\n        anchorTag.click();\n    }\n    openCoinbaseWalletDeeplink(walletLinkUrl) {\n        this.redirectDialog.present({\n            title: 'Redirecting to Coinbase Wallet...',\n            buttonText: 'Open',\n            onButtonClick: () => {\n                this.redirectToCoinbaseWallet(walletLinkUrl);\n            },\n        });\n        setTimeout(() => {\n            this.redirectToCoinbaseWallet(walletLinkUrl);\n        }, 99);\n    }\n    showConnecting(_options) {\n        // it uses the return callback to clear the dialog\n        return () => {\n            this.redirectDialog.clear();\n        };\n    }\n}\nexports.WLMobileRelayUI = WLMobileRelayUI;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,eAAe,GAAG,KAAK,CAAC;AAChC,MAAMC,gBAAgB,GAAGC,OAAO,CAAC,4CAA4C,CAAC;AAC9E,MAAMC,MAAM,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AAC3C,MAAME,WAAW,GAAGF,OAAO,CAAC,4BAA4B,CAAC;AACzD,MAAMF,eAAe,CAAC;EAClBK,WAAWA,CAAA,EAAG;IACV,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACC,cAAc,GAAG,IAAIN,gBAAgB,CAACO,cAAc,CAAC,CAAC;EAC/D;EACAC,MAAMA,CAAA,EAAG;IACL,IAAI,IAAI,CAACH,QAAQ,EAAE;MACf,MAAM,IAAII,KAAK,CAAC,4CAA4C,CAAC;IACjE;IACA,IAAI,CAACH,cAAc,CAACE,MAAM,CAAC,CAAC;IAC5B,IAAI,CAACH,QAAQ,GAAG,IAAI;EACxB;EACAK,wBAAwBA,CAACC,aAAa,EAAE;IACpC,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAACV,WAAW,CAACW,uBAAuB,CAAC;IACxDF,GAAG,CAACG,YAAY,CAACC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,EAAEd,MAAM,CAACe,WAAW,EAAE,CAAC,CAACC,IAAI,CAAC;IACvE,IAAIP,aAAa,EAAE;MACfC,GAAG,CAACG,YAAY,CAACC,MAAM,CAAC,QAAQ,EAAEL,aAAa,CAAC;IACpD;IACA,MAAMQ,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IAC7CF,SAAS,CAACG,MAAM,GAAG,YAAY;IAC/BH,SAAS,CAACD,IAAI,GAAGN,GAAG,CAACM,IAAI;IACzBC,SAAS,CAACI,GAAG,GAAG,qBAAqB;IACrCJ,SAAS,CAACK,KAAK,CAAC,CAAC;EACrB;EACAC,0BAA0BA,CAACd,aAAa,EAAE;IACtC,IAAI,CAACL,cAAc,CAACoB,OAAO,CAAC;MACxBC,KAAK,EAAE,mCAAmC;MAC1CC,UAAU,EAAE,MAAM;MAClBC,aAAa,EAAEA,CAAA,KAAM;QACjB,IAAI,CAACnB,wBAAwB,CAACC,aAAa,CAAC;MAChD;IACJ,CAAC,CAAC;IACFmB,UAAU,CAAC,MAAM;MACb,IAAI,CAACpB,wBAAwB,CAACC,aAAa,CAAC;IAChD,CAAC,EAAE,EAAE,CAAC;EACV;EACAoB,cAAcA,CAACC,QAAQ,EAAE;IACrB;IACA,OAAO,MAAM;MACT,IAAI,CAAC1B,cAAc,CAAC2B,KAAK,CAAC,CAAC;IAC/B,CAAC;EACL;AACJ;AACApC,OAAO,CAACE,eAAe,GAAGA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}