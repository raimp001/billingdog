{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkErrorForInvalidRequestArgs = exports.getCoinbaseInjectedProvider = exports.getCoinbaseInjectedSigner = exports.fetchRPCRequest = void 0;\nconst version_1 = require(\"../version\");\nconst error_1 = require(\"../core/error\");\nasync function fetchRPCRequest(request, chain) {\n  if (!chain.rpcUrl) throw error_1.standardErrors.rpc.internal('No RPC URL set for chain');\n  const requestBody = Object.assign(Object.assign({}, request), {\n    jsonrpc: '2.0',\n    id: crypto.randomUUID()\n  });\n  const res = await window.fetch(chain.rpcUrl, {\n    method: 'POST',\n    body: JSON.stringify(requestBody),\n    mode: 'cors',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Cbw-Sdk-Version': version_1.LIB_VERSION\n    }\n  });\n  const response = await res.json();\n  return response.result;\n}\nexports.fetchRPCRequest = fetchRPCRequest;\nfunction getCoinbaseInjectedSigner() {\n  const window = globalThis;\n  return window.coinbaseWalletSigner;\n}\nexports.getCoinbaseInjectedSigner = getCoinbaseInjectedSigner;\nfunction getCoinbaseInjectedProvider(_ref) {\n  let {\n    metadata,\n    preference\n  } = _ref;\n  var _a, _b, _c;\n  const window = globalThis;\n  if (preference.options !== 'smartWalletOnly') {\n    const signer = getCoinbaseInjectedSigner();\n    if (signer) return undefined; // use signer instead\n    const extension = window.coinbaseWalletExtension;\n    if (extension) {\n      const {\n        appName,\n        appLogoUrl,\n        appChainIds\n      } = metadata;\n      (_a = extension.setAppInfo) === null || _a === void 0 ? void 0 : _a.call(extension, appName, appLogoUrl, appChainIds);\n      return extension;\n    }\n  }\n  const ethereum = (_b = window.ethereum) !== null && _b !== void 0 ? _b : (_c = window.top) === null || _c === void 0 ? void 0 : _c.ethereum;\n  if (ethereum === null || ethereum === void 0 ? void 0 : ethereum.isCoinbaseBrowser) {\n    return ethereum;\n  }\n  return undefined;\n}\nexports.getCoinbaseInjectedProvider = getCoinbaseInjectedProvider;\n/**\n * Validates the arguments for an invalid request and returns an error if any validation fails.\n * Valid request args are defined here: https://eips.ethereum.org/EIPS/eip-1193#request\n * @param args The request arguments to validate.\n * @returns An error object if the arguments are invalid, otherwise undefined.\n */\nfunction checkErrorForInvalidRequestArgs(args) {\n  if (!args || typeof args !== 'object' || Array.isArray(args)) {\n    return error_1.standardErrors.rpc.invalidParams({\n      message: 'Expected a single, non-array, object argument.',\n      data: args\n    });\n  }\n  const {\n    method,\n    params\n  } = args;\n  if (typeof method !== 'string' || method.length === 0) {\n    return error_1.standardErrors.rpc.invalidParams({\n      message: \"'args.method' must be a non-empty string.\",\n      data: args\n    });\n  }\n  if (params !== undefined && !Array.isArray(params) && (typeof params !== 'object' || params === null)) {\n    return error_1.standardErrors.rpc.invalidParams({\n      message: \"'args.params' must be an object or array if provided.\",\n      data: args\n    });\n  }\n  return undefined;\n}\nexports.checkErrorForInvalidRequestArgs = checkErrorForInvalidRequestArgs;","map":{"version":3,"names":["Object","defineProperty","exports","value","checkErrorForInvalidRequestArgs","getCoinbaseInjectedProvider","getCoinbaseInjectedSigner","fetchRPCRequest","version_1","require","error_1","request","chain","rpcUrl","standardErrors","rpc","internal","requestBody","assign","jsonrpc","id","crypto","randomUUID","res","window","fetch","method","body","JSON","stringify","mode","headers","LIB_VERSION","response","json","result","globalThis","coinbaseWalletSigner","_ref","metadata","preference","_a","_b","_c","options","signer","undefined","extension","coinbaseWalletExtension","appName","appLogoUrl","appChainIds","setAppInfo","call","ethereum","top","isCoinbaseBrowser","args","Array","isArray","invalidParams","message","data","params","length"],"sources":["/Users/shardingdog/billingdog/node_modules/@coinbase/wallet-sdk/dist/util/provider.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkErrorForInvalidRequestArgs = exports.getCoinbaseInjectedProvider = exports.getCoinbaseInjectedSigner = exports.fetchRPCRequest = void 0;\nconst version_1 = require(\"../version\");\nconst error_1 = require(\"../core/error\");\nasync function fetchRPCRequest(request, chain) {\n    if (!chain.rpcUrl)\n        throw error_1.standardErrors.rpc.internal('No RPC URL set for chain');\n    const requestBody = Object.assign(Object.assign({}, request), { jsonrpc: '2.0', id: crypto.randomUUID() });\n    const res = await window.fetch(chain.rpcUrl, {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        mode: 'cors',\n        headers: { 'Content-Type': 'application/json', 'X-Cbw-Sdk-Version': version_1.LIB_VERSION },\n    });\n    const response = await res.json();\n    return response.result;\n}\nexports.fetchRPCRequest = fetchRPCRequest;\nfunction getCoinbaseInjectedSigner() {\n    const window = globalThis;\n    return window.coinbaseWalletSigner;\n}\nexports.getCoinbaseInjectedSigner = getCoinbaseInjectedSigner;\nfunction getCoinbaseInjectedProvider({ metadata, preference, }) {\n    var _a, _b, _c;\n    const window = globalThis;\n    if (preference.options !== 'smartWalletOnly') {\n        const signer = getCoinbaseInjectedSigner();\n        if (signer)\n            return undefined; // use signer instead\n        const extension = window.coinbaseWalletExtension;\n        if (extension) {\n            const { appName, appLogoUrl, appChainIds } = metadata;\n            (_a = extension.setAppInfo) === null || _a === void 0 ? void 0 : _a.call(extension, appName, appLogoUrl, appChainIds);\n            return extension;\n        }\n    }\n    const ethereum = (_b = window.ethereum) !== null && _b !== void 0 ? _b : (_c = window.top) === null || _c === void 0 ? void 0 : _c.ethereum;\n    if (ethereum === null || ethereum === void 0 ? void 0 : ethereum.isCoinbaseBrowser) {\n        return ethereum;\n    }\n    return undefined;\n}\nexports.getCoinbaseInjectedProvider = getCoinbaseInjectedProvider;\n/**\n * Validates the arguments for an invalid request and returns an error if any validation fails.\n * Valid request args are defined here: https://eips.ethereum.org/EIPS/eip-1193#request\n * @param args The request arguments to validate.\n * @returns An error object if the arguments are invalid, otherwise undefined.\n */\nfunction checkErrorForInvalidRequestArgs(args) {\n    if (!args || typeof args !== 'object' || Array.isArray(args)) {\n        return error_1.standardErrors.rpc.invalidParams({\n            message: 'Expected a single, non-array, object argument.',\n            data: args,\n        });\n    }\n    const { method, params } = args;\n    if (typeof method !== 'string' || method.length === 0) {\n        return error_1.standardErrors.rpc.invalidParams({\n            message: \"'args.method' must be a non-empty string.\",\n            data: args,\n        });\n    }\n    if (params !== undefined &&\n        !Array.isArray(params) &&\n        (typeof params !== 'object' || params === null)) {\n        return error_1.standardErrors.rpc.invalidParams({\n            message: \"'args.params' must be an object or array if provided.\",\n            data: args,\n        });\n    }\n    return undefined;\n}\nexports.checkErrorForInvalidRequestArgs = checkErrorForInvalidRequestArgs;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,+BAA+B,GAAGF,OAAO,CAACG,2BAA2B,GAAGH,OAAO,CAACI,yBAAyB,GAAGJ,OAAO,CAACK,eAAe,GAAG,KAAK,CAAC;AACpJ,MAAMC,SAAS,GAAGC,OAAO,CAAC,YAAY,CAAC;AACvC,MAAMC,OAAO,GAAGD,OAAO,CAAC,eAAe,CAAC;AACxC,eAAeF,eAAeA,CAACI,OAAO,EAAEC,KAAK,EAAE;EAC3C,IAAI,CAACA,KAAK,CAACC,MAAM,EACb,MAAMH,OAAO,CAACI,cAAc,CAACC,GAAG,CAACC,QAAQ,CAAC,0BAA0B,CAAC;EACzE,MAAMC,WAAW,GAAGjB,MAAM,CAACkB,MAAM,CAAClB,MAAM,CAACkB,MAAM,CAAC,CAAC,CAAC,EAAEP,OAAO,CAAC,EAAE;IAAEQ,OAAO,EAAE,KAAK;IAAEC,EAAE,EAAEC,MAAM,CAACC,UAAU,CAAC;EAAE,CAAC,CAAC;EAC1G,MAAMC,GAAG,GAAG,MAAMC,MAAM,CAACC,KAAK,CAACb,KAAK,CAACC,MAAM,EAAE;IACzCa,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACZ,WAAW,CAAC;IACjCa,IAAI,EAAE,MAAM;IACZC,OAAO,EAAE;MAAE,cAAc,EAAE,kBAAkB;MAAE,mBAAmB,EAAEvB,SAAS,CAACwB;IAAY;EAC9F,CAAC,CAAC;EACF,MAAMC,QAAQ,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,CAAC;EACjC,OAAOD,QAAQ,CAACE,MAAM;AAC1B;AACAjC,OAAO,CAACK,eAAe,GAAGA,eAAe;AACzC,SAASD,yBAAyBA,CAAA,EAAG;EACjC,MAAMkB,MAAM,GAAGY,UAAU;EACzB,OAAOZ,MAAM,CAACa,oBAAoB;AACtC;AACAnC,OAAO,CAACI,yBAAyB,GAAGA,yBAAyB;AAC7D,SAASD,2BAA2BA,CAAAiC,IAAA,EAA4B;EAAA,IAA3B;IAAEC,QAAQ;IAAEC;EAAY,CAAC,GAAAF,IAAA;EAC1D,IAAIG,EAAE,EAAEC,EAAE,EAAEC,EAAE;EACd,MAAMnB,MAAM,GAAGY,UAAU;EACzB,IAAII,UAAU,CAACI,OAAO,KAAK,iBAAiB,EAAE;IAC1C,MAAMC,MAAM,GAAGvC,yBAAyB,CAAC,CAAC;IAC1C,IAAIuC,MAAM,EACN,OAAOC,SAAS,CAAC,CAAC;IACtB,MAAMC,SAAS,GAAGvB,MAAM,CAACwB,uBAAuB;IAChD,IAAID,SAAS,EAAE;MACX,MAAM;QAAEE,OAAO;QAAEC,UAAU;QAAEC;MAAY,CAAC,GAAGZ,QAAQ;MACrD,CAACE,EAAE,GAAGM,SAAS,CAACK,UAAU,MAAM,IAAI,IAAIX,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACY,IAAI,CAACN,SAAS,EAAEE,OAAO,EAAEC,UAAU,EAAEC,WAAW,CAAC;MACrH,OAAOJ,SAAS;IACpB;EACJ;EACA,MAAMO,QAAQ,GAAG,CAACZ,EAAE,GAAGlB,MAAM,CAAC8B,QAAQ,MAAM,IAAI,IAAIZ,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAACC,EAAE,GAAGnB,MAAM,CAAC+B,GAAG,MAAM,IAAI,IAAIZ,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACW,QAAQ;EAC3I,IAAIA,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACE,iBAAiB,EAAE;IAChF,OAAOF,QAAQ;EACnB;EACA,OAAOR,SAAS;AACpB;AACA5C,OAAO,CAACG,2BAA2B,GAAGA,2BAA2B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,SAASD,+BAA+BA,CAACqD,IAAI,EAAE;EAC3C,IAAI,CAACA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,EAAE;IAC1D,OAAO/C,OAAO,CAACI,cAAc,CAACC,GAAG,CAAC6C,aAAa,CAAC;MAC5CC,OAAO,EAAE,gDAAgD;MACzDC,IAAI,EAAEL;IACV,CAAC,CAAC;EACN;EACA,MAAM;IAAE/B,MAAM;IAAEqC;EAAO,CAAC,GAAGN,IAAI;EAC/B,IAAI,OAAO/B,MAAM,KAAK,QAAQ,IAAIA,MAAM,CAACsC,MAAM,KAAK,CAAC,EAAE;IACnD,OAAOtD,OAAO,CAACI,cAAc,CAACC,GAAG,CAAC6C,aAAa,CAAC;MAC5CC,OAAO,EAAE,2CAA2C;MACpDC,IAAI,EAAEL;IACV,CAAC,CAAC;EACN;EACA,IAAIM,MAAM,KAAKjB,SAAS,IACpB,CAACY,KAAK,CAACC,OAAO,CAACI,MAAM,CAAC,KACrB,OAAOA,MAAM,KAAK,QAAQ,IAAIA,MAAM,KAAK,IAAI,CAAC,EAAE;IACjD,OAAOrD,OAAO,CAACI,cAAc,CAACC,GAAG,CAAC6C,aAAa,CAAC;MAC5CC,OAAO,EAAE,uDAAuD;MAChEC,IAAI,EAAEL;IACV,CAAC,CAAC;EACN;EACA,OAAOX,SAAS;AACpB;AACA5C,OAAO,CAACE,+BAA+B,GAAGA,+BAA+B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}